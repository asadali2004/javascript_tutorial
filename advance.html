<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Level Topics | JavaScript Tutorial</title>
  <link rel="stylesheet" href="common-styles.css">
</head>
<body>
  <header>
    <div class="container">
      <h1>Advanced Level Topics</h1>
      <p class="subtitle">Level 4: Professional JavaScript Development</p>
    </div>
  </header>

  <main>
    <div class="content-container">
      <div class="content-card">
        
        <div class="section">
          <p>Welcome to the final section of our JavaScript tutorial! Here, we'll dive into the more complex, but incredibly powerful, concepts that will elevate your skills from a proficient coder to a true JavaScript professional.</p>
        </div>

        <div class="section">
          <h2>4.1. Asynchronous JavaScript</h2>
          <p>JavaScript is a <strong>single-threaded language</strong>, meaning it can only do one thing at a time. This would be a huge problem if a function had to wait for a long-running operation, like fetching data from a server, because it would block the entire application.</p>
          
          <p><strong>Asynchronous programming</strong> is the solution. It's a non-blocking model that allows long-running operations to happen in the background while the rest of the code continues to execute.</p>

          <h3>The Event Loop</h3>
          <p>The Event Loop is the mechanism that makes this possible. It's a core concept to understand:</p>
          
          <div class="highlight-box">
            <h4>Event Loop Process</h4>
            <ol>
              <li><strong>Synchronous code</strong> runs on the main "Call Stack"</li>
              <li>When an <strong>asynchronous operation</strong> (like a network request or timer) is encountered, it's sent to a "Web API" (e.g., setTimeout, fetch)</li>
              <li>The <strong>Call Stack</strong> continues to execute the next synchronous code</li>
              <li>Once the asynchronous operation is complete, its callback function is placed in a <strong>"Callback Queue"</strong></li>
              <li>The <strong>Event Loop</strong> constantly checks if the Call Stack is empty. If it is, it takes the first item from the Callback Queue and pushes it onto the Call Stack to be executed</li>
            </ol>
          </div>

          <h3>Callbacks, Promises, and async/await</h3>
          <p>JavaScript has evolved its syntax for handling asynchronous code:</p>
          
          <div class="use-cases">
            <h4>Asynchronous Programming Evolution:</h4>
            <div class="use-case-item">
              <strong>Callbacks (the old way):</strong> A function passed as an argument to another function, which is then invoked inside the outer function to complete an action. This often leads to "Callback Hell" (nested callbacks that are difficult to read and maintain)
            </div>
            <div class="use-case-item">
              <strong>Promises:</strong> A modern alternative to callbacks. A Promise is an object representing the eventual completion (or failure) of an asynchronous operation. It has three states: pending, fulfilled, and rejected
            </div>
            <div class="use-case-item">
              <strong>async/await (the modern way):</strong> This is syntactic sugar built on top of Promises. It allows you to write asynchronous code that looks and behaves more like synchronous code, making it much easier to read and debug
            </div>
          </div>

          <div class="use-cases">
            <h4>Real-world Use Cases:</h4>
            <div class="use-case-item">
              <strong>API Requests:</strong> Fetching data from an API (e.g., getting a list of products from a database)
            </div>
            <div class="use-case-item">
              <strong>User Authentication:</strong> Handling user authentication and waiting for a server response
            </div>
            <div class="use-case-item">
              <strong>File Operations:</strong> Reading a file from a disk
            </div>
            <div class="use-case-item">
              <strong>Delayed Execution:</strong> Executing code after a specific delay with setTimeout
            </div>
          </div>

          <h3>Asynchronous Programming Examples</h3>
          <p>This example simulates an asynchronous data fetch to demonstrate all three methods:</p>
          
          <div class="code-block">
            <pre><code><span class="comment">// A function that returns a Promise, simulating an API call</span>
<span class="keyword">function</span> <span class="function-name">fetchData</span><span class="punctuation">()</span> <span class="punctuation">{</span>
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="function-name">Promise</span><span class="punctuation">((</span><span class="variable">resolve</span><span class="punctuation">,</span> <span class="variable">reject</span><span class="punctuation">)</span> <span class="operator">=&gt;</span> <span class="punctuation">{</span>
        <span class="comment">// Simulate a network delay</span>
        <span class="method">setTimeout</span><span class="punctuation">(()</span> <span class="operator">=&gt;</span> <span class="punctuation">{</span>
            <span class="keyword">const</span> <span class="variable">data</span> <span class="operator">=</span> <span class="punctuation">{</span> <span class="property">id</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span> <span class="property">name</span><span class="punctuation">:</span> <span class="string">'Alice'</span> <span class="punctuation">};</span>
            <span class="keyword">const</span> <span class="variable">error</span> <span class="operator">=</span> <span class="boolean">false</span><span class="punctuation">;</span>

            <span class="keyword">if</span> <span class="punctuation">(</span><span class="operator">!</span><span class="variable">error</span><span class="punctuation">)</span> <span class="punctuation">{</span>
                <span class="function-name">resolve</span><span class="punctuation">(</span><span class="variable">data</span><span class="punctuation">);</span> <span class="comment">// The promise is fulfilled</span>
            <span class="punctuation">}</span> <span class="keyword">else</span> <span class="punctuation">{</span>
                <span class="function-name">reject</span><span class="punctuation">(</span><span class="string">'Network error!'</span><span class="punctuation">);</span> <span class="comment">// The promise is rejected</span>
            <span class="punctuation">}</span>
        <span class="punctuation">},</span> <span class="number">1000</span><span class="punctuation">);</span> <span class="comment">// 1 second delay</span>
    <span class="punctuation">});</span>
<span class="punctuation">}</span>

<span class="comment">// --- 2. Using Promises (.then(), .catch()) ---</span>
<span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="string">'--- Promise example ---'</span><span class="punctuation">);</span>
<span class="function-name">fetchData</span><span class="punctuation">()</span>
    <span class="punctuation">.</span><span class="method">then</span><span class="punctuation">(</span><span class="variable">data</span> <span class="operator">=&gt;</span> <span class="punctuation">{</span>
        <span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="string">'Data received:'</span><span class="punctuation">,</span> <span class="variable">data</span><span class="punctuation">);</span>
        <span class="keyword">return</span> <span class="variable">data</span><span class="punctuation">.</span><span class="property">name</span><span class="punctuation">;</span> <span class="comment">// You can chain promises by returning a value</span>
    <span class="punctuation">})</span>
    <span class="punctuation">.</span><span class="method">then</span><span class="punctuation">(</span><span class="variable">name</span> <span class="operator">=&gt;</span> <span class="punctuation">{</span>
        <span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="string">'User name is:'</span><span class="punctuation">,</span> <span class="variable">name</span><span class="punctuation">);</span>
    <span class="punctuation">})</span>
    <span class="punctuation">.</span><span class="method">catch</span><span class="punctuation">(</span><span class="variable">error</span> <span class="operator">=&gt;</span> <span class="punctuation">{</span>
        <span class="property">console</span><span class="punctuation">.</span><span class="method">error</span><span class="punctuation">(</span><span class="string">'An error occurred:'</span><span class="punctuation">,</span> <span class="variable">error</span><span class="punctuation">);</span>
    <span class="punctuation">})</span>
    <span class="punctuation">.</span><span class="method">finally</span><span class="punctuation">(()</span> <span class="operator">=&gt;</span> <span class="punctuation">{</span>
        <span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="string">'Promise chain finished.'</span><span class="punctuation">);</span>
    <span class="punctuation">});</span>

<span class="comment">// --- 3. Using async/await (the modern way) ---</span>
<span class="keyword">async</span> <span class="keyword">function</span> <span class="function-name">getUserData</span><span class="punctuation">()</span> <span class="punctuation">{</span>
    <span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="string">'--- Async/await example ---'</span><span class="punctuation">);</span>
    <span class="keyword">try</span> <span class="punctuation">{</span>
        <span class="comment">// The `await` keyword pauses execution until the promise resolves</span>
        <span class="keyword">const</span> <span class="variable">userData</span> <span class="operator">=</span> <span class="keyword">await</span> <span class="function-name">fetchData</span><span class="punctuation">();</span>
        <span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="string">'Data received (async/await):'</span><span class="punctuation">,</span> <span class="variable">userData</span><span class="punctuation">);</span>
    <span class="punctuation">}</span> <span class="keyword">catch</span> <span class="punctuation">(</span><span class="variable">error</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="comment">// `try...catch` is used to handle rejections</span>
        <span class="property">console</span><span class="punctuation">.</span><span class="method">error</span><span class="punctuation">(</span><span class="string">'An error occurred (async/await):'</span><span class="punctuation">,</span> <span class="variable">error</span><span class="punctuation">);</span>
    <span class="punctuation">}</span> <span class="keyword">finally</span> <span class="punctuation">{</span>
        <span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="string">'Async function finished.'</span><span class="punctuation">);</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span>

<span class="function-name">getUserData</span><span class="punctuation">();</span></code></pre>
          </div>

          <div class="mistakes-section">
            <h3>Common Mistakes & Misconceptions</h3>
            <ul>
              <li><strong>Forgetting to use await:</strong> If you call an async function without <code>await</code>, you'll get a Promise object instead of the resolved value.</li>
              <li><strong>Not handling errors:</strong> Always include a <code>.catch()</code> in your Promise chain or a <code>try...catch</code> block in your async function to handle potential rejections gracefully.</li>
            </ul>
          </div>

          <div class="exercises-section">
            <h3>Exercises</h3>
            <ol>
              <li>Create a function <code>simulateLogin</code> that returns a Promise. The promise should resolve after a 2-second delay with a message like "Login successful!"</li>
              <li>Write an async function that calls <code>simulateLogin</code> and logs the success message to the console. Add a <code>try...catch</code> block to handle a simulated login failure.</li>
            </ol>
          </div>
        </div>

        <div class="section">
          <h2>4.2. Closures</h2>
          <p>A <strong>closure</strong> is a feature in JavaScript where an inner function has access to the variables of its outer function, even after the outer function has finished executing. The inner function "closes over" the variables from its lexical environment.</p>
          
          <p>The key idea is that a function remembers the environment in which it was created.</p>

          <div class="use-cases">
            <h4>Real-world Use Cases:</h4>
            <div class="use-case-item">
              <strong>Data Privacy (Module Pattern):</strong> Closures can be used to create private variables and methods that are not accessible from the outside
            </div>
            <div class="use-case-item">
              <strong>Function Factories:</strong> Creating functions that are pre-configured with certain parameters. For example, a makeMultiplier(x) function that returns another function (y) => x * y
            </div>
            <div class="use-case-item">
              <strong>Event Handlers:</strong> A common use case where an event listener function needs to access a variable from its surrounding scope
            </div>
          </div>

          <h3>Closure Example</h3>
          <p>This is a classic example of a closure being used to create a private counter:</p>
          
          <div class="code-block">
            <pre><code><span class="comment">// This is a function that returns another function</span>
<span class="keyword">function</span> <span class="function-name">createCounter</span><span class="punctuation">()</span> <span class="punctuation">{</span>
    <span class="keyword">let</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span><span class="punctuation">;</span> <span class="comment">// This is the "closed-over" variable</span>

    <span class="keyword">return</span> <span class="keyword">function</span> <span class="function-name">increment</span><span class="punctuation">()</span> <span class="punctuation">{</span>
        <span class="variable">count</span><span class="operator">++</span><span class="punctuation">;</span>
        <span class="keyword">return</span> <span class="variable">count</span><span class="punctuation">;</span>
    <span class="punctuation">};</span>
<span class="punctuation">}</span>

<span class="keyword">const</span> <span class="variable">counter1</span> <span class="operator">=</span> <span class="function-name">createCounter</span><span class="punctuation">();</span>
<span class="keyword">const</span> <span class="variable">counter2</span> <span class="operator">=</span> <span class="function-name">createCounter</span><span class="punctuation">();</span>

<span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="function-name">counter1</span><span class="punctuation">());</span> <span class="comment">// 1</span>
<span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="function-name">counter1</span><span class="punctuation">());</span> <span class="comment">// 2</span>

<span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="function-name">counter2</span><span class="punctuation">());</span> <span class="comment">// 1 (This counter has its own separate `count` variable)</span>
<span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="function-name">counter2</span><span class="punctuation">());</span> <span class="comment">// 2</span>

<span class="comment">// The `count` variable is not accessible from the outside:</span>
<span class="comment">// console.log(count); // ReferenceError: count is not defined</span></code></pre>
          </div>

          <p>In this example, the <code>increment</code> function (the inner function) forms a closure with the <code>count</code> variable (from the outer <code>createCounter</code> function's scope). Even after <code>createCounter</code> has finished, the <code>increment</code> function still "remembers" the <code>count</code> variable and can modify it.</p>

          <div class="mistakes-section">
            <h3>Common Mistakes & Misconceptions</h3>
            <ul>
              <li><strong>Overcomplicating the concept:</strong> Don't think of closures as a magical or complex feature. It's a natural behavior of how JavaScript's scope works. If a function is defined inside another function, it will always have access to its parent's variables.</li>
              <li><strong>Memory leaks:</strong> In some cases, if a closure holds onto a large object from a parent scope, it can prevent that object from being garbage-collected, leading to a memory leak. This is rare in modern browsers but good to be aware of.</li>
            </ul>
          </div>

          <div class="exercises-section">
            <h3>Exercises</h3>
            <ol>
              <li>Create a function <code>makeGreeter(language)</code> that returns a function. The returned function should take a name as a parameter and greet the user in the specified language (e.g., <code>makeGreeter('en')('John')</code> returns "Hello, John!").</li>
              <li>Use a closure to create a function that remembers and prints the number of times it has been called.</li>
            </ol>
          </div>
        </div>

        <div class="section">
          <h2>4.3. Modules</h2>
          <p>JavaScript modules allow you to break your code into separate, reusable files. This improves organization, prevents "global scope pollution" (where variables in one file accidentally overwrite variables in another), and makes code easier to maintain.</p>
          
          <p><strong>ES Modules</strong> are the standard module system in modern JavaScript.</p>

          <div class="highlight-box">
            <h4>Module System Concepts</h4>
            <ul>
              <li><strong>export:</strong> Used to export functions, objects, or primitive values from a module</li>
              <li><strong>import:</strong> Used to import exports from another module</li>
              <li><strong>Script tag:</strong> To use ES Modules, you need to include the <code>&lt;script&gt;</code> tag with <code>type="module"</code> in your HTML</li>
            </ul>
          </div>

          <h3>Module Examples</h3>
          <p>Imagine you have two files:</p>
          
          <h4>math.js</h4>
          <div class="code-block">
            <pre><code><span class="comment">// math.js - a module for mathematical operations</span>

<span class="comment">// Named exports</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="variable">PI</span> <span class="operator">=</span> <span class="number">3.14159</span><span class="punctuation">;</span>

<span class="keyword">export</span> <span class="keyword">function</span> <span class="function-name">add</span><span class="punctuation">(</span><span class="variable">a</span><span class="punctuation">,</span> <span class="variable">b</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">return</span> <span class="variable">a</span> <span class="operator">+</span> <span class="variable">b</span><span class="punctuation">;</span>
<span class="punctuation">}</span>

<span class="keyword">export</span> <span class="keyword">function</span> <span class="function-name">subtract</span><span class="punctuation">(</span><span class="variable">a</span><span class="punctuation">,</span> <span class="variable">b</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">return</span> <span class="variable">a</span> <span class="operator">-</span> <span class="variable">b</span><span class="punctuation">;</span>
<span class="punctuation">}</span>

<span class="comment">// Default export (only one per module)</span>
<span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="function-name">multiply</span><span class="punctuation">(</span><span class="variable">a</span><span class="punctuation">,</span> <span class="variable">b</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">return</span> <span class="variable">a</span> <span class="operator">*</span> <span class="variable">b</span><span class="punctuation">;</span>
<span class="punctuation">}</span></code></pre>
          </div>

          <h4>app.js</h4>
          <div class="code-block">
            <pre><code><span class="comment">// app.js - our main script</span>

<span class="comment">// Import a default export and named exports</span>
<span class="keyword">import</span> <span class="variable">multiply</span><span class="punctuation">,</span> <span class="punctuation">{</span> <span class="variable">PI</span><span class="punctuation">,</span> <span class="variable">add</span> <span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'./math.js'</span><span class="punctuation">;</span>

<span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="variable">PI</span><span class="punctuation">);</span> <span class="comment">// 3.14159</span>
<span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="function-name">add</span><span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span> <span class="number">3</span><span class="punctuation">));</span> <span class="comment">// 8</span>
<span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="function-name">multiply</span><span class="punctuation">(</span><span class="number">4</span><span class="punctuation">,</span> <span class="number">5</span><span class="punctuation">));</span> <span class="comment">// 20</span></code></pre>
          </div>

          <h4>HTML File</h4>
          <div class="code-block">
            <pre><code><span class="html-tag">&lt;script</span> <span class="html-attribute">type</span><span class="operator">=</span><span class="html-value">"module"</span> <span class="html-attribute">src</span><span class="operator">=</span><span class="html-value">"app.js"</span><span class="html-tag">&gt;&lt;/script&gt;</span></code></pre>
          </div>

          <div class="mistakes-section">
            <h3>Common Mistakes & Misconceptions</h3>
            <ul>
              <li><strong>Forgetting type="module":</strong> Without this attribute in your script tag, the browser won't understand the import/export keywords.</li>
              <li><strong>Incorrect file path:</strong> Make sure your import statement uses the correct relative or absolute path to the module file.</li>
            </ul>
          </div>

          <div class="exercises-section">
            <h3>Exercises</h3>
            <ol>
              <li>Create a <code>utils.js</code> file with two exported functions: <code>capitalize(string)</code> and <code>reverse(string)</code>.</li>
              <li>Create an <code>app.js</code> file, import those functions, and use them to transform a string.</li>
            </ol>
          </div>
        </div>

        <div class="section">
          <h2>4.4. JavaScript Design Patterns</h2>
          <p>Design patterns are reusable solutions to common problems in software design. They aren't pieces of code you can copy-paste, but rather templates for how to structure your code.</p>

          <h3>The Module Pattern</h3>
          <p>The Module Pattern is a powerful way to organize code into private and public parts, using closures to create a private scope. It's a foundational pattern for building encapsulated components.</p>
          
          <div class="code-block">
            <pre><code><span class="keyword">const</span> <span class="variable">calculator</span> <span class="operator">=</span> <span class="punctuation">(()</span> <span class="operator">=&gt;</span> <span class="punctuation">{</span>
    <span class="comment">// These are private variables and functions, inaccessible from outside</span>
    <span class="keyword">const</span> <span class="variable">secretValue</span> <span class="operator">=</span> <span class="number">100</span><span class="punctuation">;</span>
    <span class="keyword">const</span> <span class="variable">add</span> <span class="operator">=</span> <span class="punctuation">(</span><span class="variable">a</span><span class="punctuation">,</span> <span class="variable">b</span><span class="punctuation">)</span> <span class="operator">=&gt;</span> <span class="variable">a</span> <span class="operator">+</span> <span class="variable">b</span><span class="punctuation">;</span>

    <span class="comment">// This is the public interface, returned by the function</span>
    <span class="keyword">return</span> <span class="punctuation">{</span>
        <span class="comment">// Public method</span>
        <span class="property">increment</span><span class="punctuation">:</span> <span class="punctuation">(</span><span class="variable">a</span><span class="punctuation">)</span> <span class="operator">=&gt;</span> <span class="function-name">add</span><span class="punctuation">(</span><span class="variable">a</span><span class="punctuation">,</span> <span class="number">1</span><span class="punctuation">),</span>
        <span class="comment">// Public property</span>
        <span class="property">secret</span><span class="punctuation">:</span> <span class="variable">secretValue</span>
    <span class="punctuation">};</span>
<span class="punctuation">})()</span><span class="punctuation">;</span> <span class="comment">// The parentheses at the end immediately invoke the function</span>

<span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="variable">calculator</span><span class="punctuation">.</span><span class="method">increment</span><span class="punctuation">(</span><span class="number">5</span><span class="punctuation">));</span> <span class="comment">// 6</span>
<span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="variable">calculator</span><span class="punctuation">.</span><span class="property">secret</span><span class="punctuation">);</span> <span class="comment">// 100</span>
<span class="comment">// console.log(calculator.add); // undefined (it's private)</span></code></pre>
          </div>

          <h3>The Factory Pattern</h3>
          <p>The Factory Pattern provides an interface for creating objects without exposing the creation logic. This is useful when you need to create multiple objects of the same type but with different configurations.</p>
          
          <div class="code-block">
            <pre><code><span class="keyword">function</span> <span class="function-name">createCharacter</span><span class="punctuation">(</span><span class="variable">name</span><span class="punctuation">,</span> <span class="variable">type</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="comment">// The factory function creates and returns an object</span>
    <span class="keyword">return</span> <span class="punctuation">{</span>
        <span class="property">name</span><span class="punctuation">,</span>
        <span class="property">type</span><span class="punctuation">,</span>
        <span class="method">sayHi</span><span class="punctuation">()</span> <span class="punctuation">{</span>
            <span class="property">console</span><span class="punctuation">.</span><span class="method">log</span><span class="punctuation">(</span><span class="template-string">`Hi, I'm <span class="template-expression">${<span class="keyword">this</span><span class="punctuation">.</span><span class="property">name</span>}</span> the <span class="template-expression">${<span class="keyword">this</span><span class="punctuation">.</span><span class="property">type</span>}</span>!`</span><span class="punctuation">);</span>
        <span class="punctuation">}</span>
    <span class="punctuation">};</span>
<span class="punctuation">}</span>

<span class="keyword">const</span> <span class="variable">warrior</span> <span class="operator">=</span> <span class="function-name">createCharacter</span><span class="punctuation">(</span><span class="string">'Grok'</span><span class="punctuation">,</span> <span class="string">'Warrior'</span><span class="punctuation">);</span>
<span class="keyword">const</span> <span class="variable">mage</span> <span class="operator">=</span> <span class="function-name">createCharacter</span><span class="punctuation">(</span><span class="string">'Elara'</span><span class="punctuation">,</span> <span class="string">'Mage'</span><span class="punctuation">);</span>

<span class="variable">warrior</span><span class="punctuation">.</span><span class="method">sayHi</span><span class="punctuation">();</span> <span class="comment">// "Hi, I'm Grok the Warrior!"</span>
<span class="variable">mage</span><span class="punctuation">.</span><span class="method">sayHi</span><span class="punctuation">();</span>    <span class="comment">// "Hi, I'm Elara the Mage!"</span></code></pre>
          </div>

          <div class="exercises-section">
            <h3>Exercises</h3>
            <ol>
              <li>Using the Module Pattern, create a simple object that manages a list of items. It should have a private array and public methods like <code>addItem(item)</code>, <code>removeItem(item)</code>, and <code>getAllItems()</code>.</li>
              <li>Create a Factory function <code>createVehicle(type, color)</code> that returns a vehicle object with <code>type</code>, <code>color</code>, and a <code>drive()</code> method.</li>
            </ol>
          </div>
        </div>

        <div class="section">
          <h2>4.5. Performance Optimization</h2>
          <p>Writing performant code isn't about using a magic trick; it's about making conscious choices to ensure your application runs smoothly.</p>

          <div class="use-cases">
            <h4>Key Performance Principles:</h4>
            <div class="use-case-item">
              <strong>Minimize DOM Manipulation:</strong> Accessing and modifying the DOM is one of the slowest operations in the browser. Whenever possible, make changes in JavaScript and then update the DOM once with the final result
            </div>
            <div class="use-case-item">
              <strong>Use Efficient Algorithms:</strong> The choice of an algorithm can have a huge impact. For example, searching through a small array is fast, but a large one might benefit from a more efficient search algorithm
            </div>
            <div class="use-case-item">
              <strong>Avoid Global Variables:</strong> Global variables are easily modified by any part of your code, which can lead to unexpected behavior and makes debugging harder. Use modules or closures to keep your data private
            </div>
            <div class="use-case-item">
              <strong>Asynchronous Operations:</strong> Never run a long, blocking calculation or loop on the main thread. This will freeze your UI. Instead, break it up into smaller tasks, or use Web Workers for truly CPU-intensive work
            </div>
            <div class="use-case-item">
              <strong>Use Browser Developer Tools:</strong> The Performance and Memory tabs in your browser's developer tools are essential for identifying bottlenecks and finding where your code is running slow
            </div>
          </div>

          <h3>DOM Optimization Example</h3>
          <p>Here's an example of inefficient vs. efficient DOM manipulation:</p>
          
          <div class="code-block">
            <pre><code><span class="comment">// ❌ Inefficient: Multiple DOM updates</span>
<span class="keyword">const</span> <span class="variable">list</span> <span class="operator">=</span> <span class="property">document</span><span class="punctuation">.</span><span class="method">getElementById</span><span class="punctuation">(</span><span class="string">'my-list'</span><span class="punctuation">);</span>
<span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">let</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span><span class="punctuation">;</span> <span class="variable">i</span> <span class="operator">&lt;</span> <span class="number">1000</span><span class="punctuation">;</span> <span class="variable">i</span><span class="operator">++</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">const</span> <span class="variable">listItem</span> <span class="operator">=</span> <span class="property">document</span><span class="punctuation">.</span><span class="method">createElement</span><span class="punctuation">(</span><span class="string">'li'</span><span class="punctuation">);</span>
    <span class="variable">listItem</span><span class="punctuation">.</span><span class="property">textContent</span> <span class="operator">=</span> <span class="template-string">`Item <span class="template-expression">${<span class="variable">i</span>}</span>`</span><span class="punctuation">;</span>
    <span class="variable">list</span><span class="punctuation">.</span><span class="method">appendChild</span><span class="punctuation">(</span><span class="variable">listItem</span><span class="punctuation">);</span> <span class="comment">// DOM update on every iteration</span>
<span class="punctuation">}</span>

<span class="comment">// ✅ Efficient: Single DOM update</span>
<span class="keyword">const</span> <span class="variable">list</span> <span class="operator">=</span> <span class="property">document</span><span class="punctuation">.</span><span class="method">getElementById</span><span class="punctuation">(</span><span class="string">'my-list'</span><span class="punctuation">);</span>
<span class="keyword">const</span> <span class="variable">fragment</span> <span class="operator">=</span> <span class="property">document</span><span class="punctuation">.</span><span class="method">createDocumentFragment</span><span class="punctuation">();</span>

<span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">let</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span><span class="punctuation">;</span> <span class="variable">i</span> <span class="operator">&lt;</span> <span class="number">1000</span><span class="punctuation">;</span> <span class="variable">i</span><span class="operator">++</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">const</span> <span class="variable">listItem</span> <span class="operator">=</span> <span class="property">document</span><span class="punctuation">.</span><span class="method">createElement</span><span class="punctuation">(</span><span class="string">'li'</span><span class="punctuation">);</span>
    <span class="variable">listItem</span><span class="punctuation">.</span><span class="property">textContent</span> <span class="operator">=</span> <span class="template-string">`Item <span class="template-expression">${<span class="variable">i</span>}</span>`</span><span class="punctuation">;</span>
    <span class="variable">fragment</span><span class="punctuation">.</span><span class="method">appendChild</span><span class="punctuation">(</span><span class="variable">listItem</span><span class="punctuation">);</span> <span class="comment">// Build in memory</span>
<span class="punctuation">}</span>

<span class="variable">list</span><span class="punctuation">.</span><span class="method">appendChild</span><span class="punctuation">(</span><span class="variable">fragment</span><span class="punctuation">);</span> <span class="comment">// Single DOM update</span></code></pre>
          </div>

          <div class="highlight-box">
            <h4>Performance Best Practices</h4>
            <ul>
              <li>Don't append elements inside loops - build them in memory first</li>
              <li>Use <code>document.createDocumentFragment()</code> for multiple DOM insertions</li>
              <li>Cache DOM element references instead of querying repeatedly</li>
              <li>Use <code>requestAnimationFrame()</code> for smooth animations</li>
              <li>Debounce expensive operations like API calls</li>
            </ul>
          </div>
        </div>

        <div class="nav-buttons">
          <a href="intermediate.html" class="back-btn">← Previous: Intermediate Concepts</a>
          <a href="projectIdea.html" class="next-btn">Next: Project Ideas →</a>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="container">
      <p>&copy; 2025 JavaScript Tutorial. Mastering professional development!</p>
    </div>
  </footer>
</body>
</html>